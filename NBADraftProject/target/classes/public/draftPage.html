<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/html">
<head>
	<title>League Draft</title>
	<meta charset="utf-8">
	<link rel="stylesheet" href="draft.css">
</head>
<body onload="javascript:document.getElementById('draftTable').classList.toggle('hide2'); javascript:connect(); javascript:checkIfReady()">


<h1>Players</h1>


<div id="table-scroll">
	<table id="draftTable" display="hide">
		<CAPTION ALIGN="top">Choose a NBA Player to Draft</CAPTION>
		<thead>
		<tr>
			<th>  </th><th>Name</th><th>Position</th><th>Team</th><th>Player Rank: Overall</th><th>Player Rank: Position</th><th>Salary</th>
		</tr>
		</thead>
		<tbody>

		</tbody>
	</table>
</div>

<div id="chat-page" style="position:absolute; left: 1080px; top:50px;">
	<div class="chat-container">
		<div class="chat-header">
			<h2>Draft Console</h2>
		</div>
		<div class="connecting">
			 Connecting Draft...
		</div>
		<ul id="messageArea">

		</ul>
		<!--<form id="messageForm" name="messageForm">
			<div class="form-group">
			-<div class="input-group clearfix">
					<input type="text" id="message" placeholder="Type a message..." autocomplete="off" class="form-control"/>
					<button type="submit" class="primary">Send</button>
				</div>
			</div>
		</form>---->
	</div>
</div>

<div id="chat-page1" style="position:absolute; left: 1080px; top:390px;">
	<div class="chat-container">
		<div class="chat-header">
			<h2>Draft Chat</h2>
		</div>
		<div class="connecting">
			Connecting...
		</div>
		<ul id="messageArea1">

		</ul>
		<form id="messageForm1" name="messageForm1">
			<div class="form-group">
				<div class="input-group clearfix">
					<input type="text" id="message" placeholder="Type a message..." autocomplete="off" class="form-control"/>
					<button type="submit" class="primary">Send</button>
				</div>
			</div>
		</form>
	</div>
</div>



<!--  new search bar for room number search  -->


<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.0/jquery.min.js"></script>
<script src="https://ajax.aspnetcdn.com/ajax/jQuery/jquery-3.4.0.min.js"></script>
<script src="/draft.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/sockjs-client/1.1.4/sockjs.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/stomp.js/2.3.3/stomp.min.js"></script>

<script>
		function checkIfReady(){
		var obj = {}
		obj.userID = sessionStorage.getItem("userID");
		obj.leagueID = sessionStorage.getItem("leagueID");
		$.ajax({
				type: 'POST',						//get data from server to the client
				url: 'http://ec2-54-215-176-11.us-west-1.compute.amazonaws.com/checkIfReady',	//want to get info from here, it's in a JSONObject
				data: JSON.stringify(obj),
				contentType: "application/json",
				crossDomain: true
			})
			.done(function(data) { 
				if(data.order!=null){
				startDraft();
				alert(data.message);
				}
				else{
				alert(data.message);
				}
			})
			.fail(function(data) { 
			alert("Failed to log you in.")
			});
	}
</script>
<script>
		function Click(buttonID){
			var obj = {};
			obj.userID=sessionStorage.getItem("userID");
			obj.leagueID=sessionStorage.getItem("leagueID");
			obj.playerID=buttonID;

			$.ajax({
				type: 'POST',						//get data from server to the client
				url: 'http://ec2-54-215-176-11.us-west-1.compute.amazonaws.com/draft',	//want to get info from here, it's in a JSONObject
				data: JSON.stringify(obj),
				contentType: "application/json",
				crossDomain: true
			})
		.done(function(data) {
				if(data.message != null)
				{alert(data.message);
				} else if(data.finish_trigger != null){ 
					var key = {}; 
					key.leagueID=data.finish_trigger;				 
					$.ajax({ 
						type: 'POST',						//get data from server to the client 
						url: 'http://ec2-54-215-176-11.us-west-1.compute.amazonaws.com/finishDraft',	//want to get info from here, it's in a JSONObject
						data: JSON.stringify(key), 
						contentType: "application/json", 
						crossDomain: true 
					})
					.done(function(data){endDraft();});				}
				else{
				sendDraft(data.playerRankOverall, data.name);
				}
			})
			.fail(function(data) {
	        	alert("Failed to load data.");
	    	});
		}
		
</script>


</body>
</html>

